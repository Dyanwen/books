# 实现数组扁平化的 6 种方式

> 数组的扁平化其实就是将一个嵌套多层的数组 array（嵌套可以是任何层数）转换为只有一层的数组

## 方法一：普通的递归实

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];

function arrTon(arr) {
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    const item = arr[i];
    if (Object.prototype.toString.call(item) == "[object Array]") {
      //Array.isArray(item)
      arrTon(item);
    } else {
      result.push(item);
    }
  }
  return result;
}
arrTon(arr);
```

## 方法二：利用 reduce 函数迭代

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];
function flatten(arr) {
  return arr.reduce(function (prev, next) {
    return prev.concat(Array.isArray(next) ? flatten(next) : next);
  }, []);
}
```

## 方法三：扩展运算符实现

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];
function flatten(arr) {
  while (arr.some((item) => Array.isArray(item))) {
    arr = [].concat(...arr);
  }
  return arr;
}
flatten(arr);
```

## 方法四：split 和 toString 共同处理

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];
let result = arr.toString().split(",");
```

## 方法五：调用 ES6 中的 flat

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];
let result = arr.flat(Infinity);
```

## 方法六：正则和 JSON 方法共同处理

```js
let arr = [1, 2, [1, 2], [3, [4, 5, 6, [7, 8, 9], [9, 0, 1]]]];
function flatten(arr) {
  let str = JSON.stringify(arr);
  str = str.replace(/(\[|\])/g, "");
  str = "[" + str + "]";
  return JSON.parse(str);
}
flatten(arr);
```
