# 04 | 函数表达式：涉及大量概念，函数表达式到底该怎么学？

## 函数声明和函数表达式的区别

1. 函数表达式是在表达式语句中使用 function 的,最典型的表达式是 a=b 这种形式,因为函数也是一个对象,我们把“a=function(){}”这种方式称为函数表达式
2. 在函数表达式中,可以省略函数名称,从而创建匿名函数
3. 一个函数表达式可以被用作一个即时调用的函数表达式--IIFE

```js
// 函数声明
function a() {
  // ...
}
// 函数表达式
const b = function () {
  // ...
};
```

### 执行过程

![不同](images/04/04-1.png)

> 表达式就是表示值的式子,而语句是操作值的式子
>
> 在变量提升阶段,V8 并不会执行赋值的表达式,该阶段只会分析基础的语句,比如变量的定义,函数的声明

```js
var x = 5;
// 会执行两步操作:
var x = undefined; //编译阶段完成的,也就是变量提升阶段完成的
x = 5; // 表达式,所有的表达式都是在执行阶段完成
```

在变量提升阶段,V8 将这些变量存放在作用域中,还会给他们赋一个默认的 undefined 值,所以在定义一个普通的变量之前,使用该变量,那么该变量的值就是 undefined

现在我们知道,表达式是不会在编译阶段执行的,那么函数声明是表达式还是语句呢?

```
function foo(){
    console.log('foo);
}
```

> 执行上面这段代码,他并没有输出任何内容,所以可以肯定,函数声明并不是一个表达式,
>
> 而是一个语句.V8 在变量提升阶段,如果遇到函数声明,那么 V8 同样会对该函数声明执行变量提升操作

函数也是一个对象,所以在编译阶段,V8 就会将整个函数对象提升到作用域中,并不是给该函数名称赋一个 undefined.

## V8 是怎么处理函数表达式的?

在一个表达式中使用 function 来定义一个函数,那么就把该函数称为函数表达式.

函数立即表达式也是一个表达式,所以 V8 在编译阶段,并不会为该表达式创建函数对象,这样的一个好处就是不会污染全局环境,函数和函数内部的变量都不会被其他部分的代码访问到.

V8 对于提升函数和提升变量的策略是不同的，如果提升了一个变量，那么 V8 在将变量提 升到作用域中时，还会为其设置默认值 undeifned，如果是函数声明，那么 V8 会在内存中创建 该函数对象，并提升整个函数对象

函数表达式也是表达式的一种，在编译阶段，V8 并不会将表达式中的函数对象提升到全局作 用域中，所以无法在函数表达式之前使用该函数。函数立即表达式是一种特别的表达式，主 要用来封装一些变量、函数，可以起到变量隔离和代码隐藏的作用，因此在一些大的开源项 目中有广泛的应用

```
var n = 1;
(function () {
	n=100,
	console.log(n)//100
}())
console.log(n)//100

var n = 1
function foo() {
	n = 100;
	console.log(n)//100
}
console.log(n)//1
foo()
```
